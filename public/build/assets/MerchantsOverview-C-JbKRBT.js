import{_ as v}from"./AdminLayout-DyKJTlMu.js";import b from"./MerchantProgressComponent-DauOmI2Z.js";import{i as l,j as u,o as n,c as f,w as p,a as e,k as c,v as g,e as a,h as d,t as h,F as m,l as y,g as w}from"./app-BR1h8Tyc.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-BYFCwL7N.js";const M={components:{AdminLayout:v,MerchantProgressComponent:b},props:["visits"],data(){return{regions:[],locations:[],filteredLocations:[],merchants:[],merchantProgresses:[],selectedRegion:"",selectedLocation:"",selectedMerchant:"",selectedDate:new Date().toISOString().substr(0,10)}},mounted(){this.getRegions(),this.getLocations(),this.getMerchants(),this.getMerchantProgresses()},methods:{async getRegions(){try{const s=await l.get("/api/regions");this.regions=s.data}catch(s){console.error("Error fetching regions:",s)}},async getLocations(){try{const s=await l.get("/api/locations");this.locations=s.data,this.filteredLocations=this.locations}catch(s){console.error("Error fetching locations:",s)}},async getMerchants(){try{const s=await l.get("/admin/merchants/all");this.merchants=s.data}catch(s){console.error("Error fetching merchants:",s)}},async getMerchantProgresses(){try{const s=await l.get(`/admin/generalVisitProgress/${this.selectedDate}`);this.merchantProgresses=s.data}catch(s){console.error("Error fetching merchant progresses:",s)}},async filterData(){try{const s=await l.get(`/admin/generalVisitProgress/${this.selectedDate}`,{params:{region_id:this.selectedRegion,location_id:this.selectedLocation,merchant_id:this.selectedMerchant}});this.merchantProgresses=s.data}catch(s){console.error("Error filtering data:",s)}},filterLocations(){this.selectedRegion?this.filteredLocations=this.locations.filter(s=>s.region_id===this.selectedRegion):this.filteredLocations=this.locations}}},D=e("h2",{class:"font-semibold text-lg text-white leading-tight text-center"},[w(" Visitas "),e("span",{class:"ml-2 bg-white-ac text-black px-2 py-1 rounded"},"35%")],-1),L={class:"bg-white p-4 max-w-3xl mx-auto"},V={class:"filters"},P={class:"grid grid-cols-2 gap-4 mb-4"},C=e("label",{for:"region",class:"block text-sm font-medium text-gray-700"},"Región",-1),R=e("option",{value:""},"Todos",-1),E=["value"],B=e("label",{for:"location",class:"block text-sm font-medium text-gray-700"},"Locación",-1),S=e("option",{value:""},"Todos",-1),T=["value"],j={class:"mb-4"},A=e("label",{for:"merchant",class:"block text-sm font-medium text-gray-700"},"Seleccionar Mercaderista",-1),U=e("option",{value:""},"Todos",-1),O=["value"],F=e("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Elige una fecha",-1),H={class:"mt-1 relative rounded-md shadow-sm"},N=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-4 14h.01M12 21v-5m0 0H9m3 0h3m-3 0V3m0 16h.01M8 7V3m8 4V3m-4 14h.01M12 21v-5m0 0H9m3 0h3m-3 0V3m0 16h.01"})])],-1),I={class:"px-3 pt-2 max-w-3xl mx-auto"},q=e("div",{class:"bg-white pt-2 pb-2 px-3 rounded-lg shadow-md flex items-center justify-between space-x-4 my-3 w-full"},[e("div",{class:"grid grid-cols-8 w-full py-1"},[e("div",{class:"col-span-4 text-left font-bold text-red-800 text-lg"}," Mercaderista "),e("div",{class:"col-span-2 text-left font-bold text-red-800 text-lg"}," Objetivo "),e("div",{class:"col-span-2 text-left font-bold text-red-800 text-lg"}," Avance ")])],-1);function z(s,o,G,J,r,i){const x=u("MerchantProgressComponent"),_=u("AdminLayout");return n(),f(_,{title:"Dashboard"},{header:p(()=>[D]),default:p(()=>[e("div",L,[e("div",V,[e("div",P,[e("div",null,[C,c(e("select",{id:"region","onUpdate:modelValue":o[0]||(o[0]=t=>r.selectedRegion=t),onChange:o[1]||(o[1]=t=>{i.filterData,i.filterLocations}),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[R,(n(!0),a(m,null,d(r.regions,t=>(n(),a("option",{key:t.id,value:t.id},h(t.name),9,E))),128))],544),[[g,r.selectedRegion]])]),e("div",null,[B,c(e("select",{id:"location","onUpdate:modelValue":o[2]||(o[2]=t=>r.selectedLocation=t),onChange:o[3]||(o[3]=(...t)=>i.filterData&&i.filterData(...t)),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[S,(n(!0),a(m,null,d(r.filteredLocations,t=>(n(),a("option",{key:t.id,value:t.id},h(t.name),9,T))),128))],544),[[g,r.selectedLocation]])])]),e("div",j,[A,c(e("select",{id:"merchant","onUpdate:modelValue":o[4]||(o[4]=t=>r.selectedMerchant=t),onChange:o[5]||(o[5]=(...t)=>i.filterData&&i.filterData(...t)),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[U,(n(!0),a(m,null,d(r.merchants,t=>(n(),a("option",{key:t.id,value:t.id},h(t.name),9,O))),128))],544),[[g,r.selectedMerchant]])]),e("div",null,[F,e("div",H,[N,c(e("input",{type:"date",id:"date","onUpdate:modelValue":o[6]||(o[6]=t=>r.selectedDate=t),onChange:o[7]||(o[7]=(...t)=>i.filterData&&i.filterData(...t)),class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Elige una fecha"},null,544),[[y,r.selectedDate]])])])])]),e("div",I,[q,(n(!0),a(m,null,d(r.merchantProgresses,t=>(n(),f(x,{key:t.merchant_id,merchantProgress:t,date:r.selectedDate},null,8,["merchantProgress","date"]))),128))])]),_:1})}const Z=k(M,[["render",z]]);export{Z as default};
