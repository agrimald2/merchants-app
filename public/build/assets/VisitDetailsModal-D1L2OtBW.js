import{_ as v}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{o as r,e as a,a as e,n,t as h,f as _,F as b,h as f,p as g,q as S}from"./app-U5YtH81c.js";const x={components:{},props:["visit"],data(){return{isDetailsSelected:!0,isStartSelected:!0,isEndSelected:!1,isPosSelected:!1}},computed:{mapSrc(){return this.isStartSelected?`https://www.google.com/maps/embed/v1/place?key=AIzaSyD838-bKnRCBtmc2HgdkxH-GvykXOhUKWI&q=${this.visit.start_latitude},${this.visit.start_longitude}`:this.isPosSelected?`https://www.google.com/maps/embed/v1/place?key=AIzaSyD838-bKnRCBtmc2HgdkxH-GvykXOhUKWI&q=${this.visit.point_of_sale.latitude},${this.visit.point_of_sale.longitude}`:`https://www.google.com/maps/embed/v1/place?key=AIzaSyD838-bKnRCBtmc2HgdkxH-GvykXOhUKWI&q=${this.visit.end_latitude},${this.visit.end_longitude}`},visitPhotos(){return[this.visit.photo_url_1,this.visit.photo_url_2,this.visit.photo_url_3,this.visit.photo_url_4].filter(o=>o)}},methods:{closeModal(){this.$emit("close")},selectDetails(){this.isDetailsSelected=!0},selectPhotos(){this.isDetailsSelected=!1},selectStart(){this.isStartSelected=!0,this.isEndSelected=!1,this.isPosSelected=!1},selectEnd(){this.isStartSelected=!1,this.isEndSelected=!0,this.isPosSelected=!1},selectPos(){this.isStartSelected=!1,this.isEndSelected=!1,this.isPosSelected=!0},calculateTotalTime(o,i){const d=new Date(o),t=new Date(i)-d,s=Math.floor(t/36e5),l=Math.floor(t%36e5/6e4);return`${s}h ${l}m`}}},c=o=>(g("data-v-f7dda35d"),o=o(),S(),o),y={class:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-10"},p={class:"bg-white rounded-lg shadow-lg overflow-hidden w-11/12 max-w-2xl"},w={class:"p-4 border-b"},k={class:"flex justify-between items-center"},D=c(()=>e("h2",{class:"text-lg font-semibold"},"Detalles de la Visita",-1)),P=c(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),I=[P],C={class:"p-4"},T={class:"flex space-x-4 mb-4"},E={key:0,class:"mb-4"},B=c(()=>e("h3",{class:"font-semibold text-gray-700"},"Tiempos",-1)),M={class:"grid grid-cols-3 gap-4 mt-2"},H=c(()=>e("label",{class:"block text-gray-500"},"Llegada",-1)),V={class:"text-lg font-medium text-gray-900"},z=c(()=>e("label",{class:"block text-gray-500"},"Salida",-1)),K={class:"text-lg font-medium text-gray-900"},L=c(()=>e("label",{class:"block text-gray-500"},"Tiempo",-1)),F={class:"text-lg font-medium text-gray-900"},O={key:1,class:"mb-4"},j={class:"font-semibold text-gray-700"},q={class:"flex items-center space-x-4 mt-2"},A={class:"mt-2"},N=["src"],U={key:2,class:"mb-4"},G=c(()=>e("h3",{class:"font-semibold text-gray-700"},"Bitácora",-1)),R={class:"p-4 bg-gray-100 rounded-md text-gray-700"},W={key:3,class:"mb-4"},X=c(()=>e("h3",{class:"font-semibold text-gray-700"},"Fotos Durante la Visita",-1)),J={class:"carousel"},Q=["src"];function Y(o,i,d,u,t,s){return r(),a("div",y,[e("div",p,[e("div",w,[e("div",k,[D,e("button",{class:"text-black",onClick:i[0]||(i[0]=l=>o.$emit("close"))},I)])]),e("div",C,[e("div",T,[e("button",{class:n([{"text-red-500 border-b-2 border-red-500":t.isDetailsSelected,"text-gray-500":!t.isDetailsSelected},"pb-1 focus:outline-none"]),onClick:i[1]||(i[1]=(...l)=>s.selectDetails&&s.selectDetails(...l))},"Detalles",2),e("button",{class:n([{"text-red-500 border-b-2 border-red-500":!t.isDetailsSelected,"text-gray-500":t.isDetailsSelected},"pb-1 focus:outline-none"]),onClick:i[2]||(i[2]=(...l)=>s.selectPhotos&&s.selectPhotos(...l))},"Fotos Durante la Visita",2)]),t.isDetailsSelected?(r(),a("div",E,[B,e("div",M,[e("div",null,[H,e("div",V,h(new Date(d.visit.visit_started_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})),1)]),e("div",null,[z,e("div",K,h(new Date(d.visit.visit_ended_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})),1)]),e("div",null,[L,e("div",F,h(s.calculateTotalTime(d.visit.visit_started_at,d.visit.visit_ended_at)),1)])])])):_("",!0),t.isDetailsSelected?(r(),a("div",O,[e("h3",j,"Ubicación - "+h(d.visit.point_of_sale.address),1),e("div",q,[e("button",{class:n([{"text-red-500 border-b-2 border-red-500":t.isStartSelected,"text-gray-500":!t.isStartSelected},"pb-1 focus:outline-none"]),onClick:i[3]||(i[3]=(...l)=>s.selectStart&&s.selectStart(...l))},"INICIO",2),e("button",{class:n([{"text-red-500 border-b-2 border-red-500":t.isEndSelected,"text-gray-500":!t.isEndSelected},"pb-1 focus:outline-none"]),onClick:i[4]||(i[4]=(...l)=>s.selectEnd&&s.selectEnd(...l))},"FINAL",2),e("button",{class:n([{"text-red-500 border-b-2 border-red-500":t.isPosSelected,"text-gray-500":!t.isPosSelected},"pb-1 focus:outline-none"]),onClick:i[5]||(i[5]=(...l)=>s.selectPos&&s.selectPos(...l))},"POS",2)]),e("div",A,[e("iframe",{src:s.mapSrc,width:"800",height:"500",style:{border:"0"},allowfullscreen:"true",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade",allow:"geolocation"},null,8,N)])])):_("",!0),t.isDetailsSelected?(r(),a("div",U,[G,e("div",R,h(d.visit.visit_overview),1)])):_("",!0),t.isDetailsSelected?_("",!0):(r(),a("div",W,[X,e("div",J,[(r(!0),a(b,null,f(s.visitPhotos,(l,m)=>(r(),a("div",{key:m,class:"carousel-item"},[e("img",{src:l,alt:"Visit photo",class:"w-full h-64 object-cover rounded-lg"},null,8,Q)]))),128))])]))])])])}const ee=v(x,[["render",Y],["__scopeId","data-v-f7dda35d"]]);export{ee as default};
