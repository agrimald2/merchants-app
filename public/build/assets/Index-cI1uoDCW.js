import{_ as M}from"./AdminLayout-Bjl-9Nt9.js";import k from"./AddMerchantModal-BcGAYxoh.js";import C from"./MerchantDetailsModal-T-aZi0-t.js";import L from"./RemoveMerchantModal-CxpH97LV.js";import{i as f,j as p,o as l,c as x,w as b,a as e,k as g,v,e as d,h as c,t as r,F as a,l as A,g as h,f as R}from"./app-DuZ7Hec_.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-BWQql4y8.js";const B={components:{AdminLayout:M,AddMerchantModal:k,MerchantDetailsModal:C,RemoveMerchantModal:L},data(){return{merchants:[],filteredMerchants:[],showAddModal:!1,showDetailsModal:!1,showRemoveModal:!1,newMerchant:{name:"",username:"",dni:"",phone:""},selectedMerchant:null,regions:[],locations:[],selectedRegion:"",selectedLocation:"",searchQuery:""}},mounted(){this.fetchMerchants(),this.getRegions(),this.getLocations()},methods:{goBack(){this.$inertia.get(route("admin.uploadData"))},fetchMerchants(){f.get("/admin/merchants/all").then(o=>{this.merchants=o.data,this.filterMerchants()}).catch(o=>{console.error("Error fetching merchants:",o)})},viewDetails(o){this.selectedMerchant=o,this.showDetailsModal=!0},async getRegions(){try{const o=await f.get("/api/regions");this.regions=o.data}catch(o){console.error("Error fetching regions:",o)}},async getLocations(){try{const o=await f.get("/api/locations");this.locations=o.data}catch(o){console.error("Error fetching locations:",o)}},filterMerchants(){this.filteredMerchants=this.merchants.filter(o=>{const s=this.selectedRegion?o.location.sub_region.region.id===this.selectedRegion:!0,m=this.selectedLocation?o.location.id===this.selectedLocation:!0,_=this.searchQuery?o.name.toLowerCase().includes(this.searchQuery.toLowerCase())||o.dni.includes(this.searchQuery):!0;return s&&m&&_})}}},N={class:"flex items-center justify-between w-full"},Q=e("i",{class:"fa-solid fa-circle-chevron-left"},null,-1),V=[Q],E=e("h2",{class:"font-semibold text-lg text-white leading-tight mx-auto"}," Mercaderistas ",-1),I=e("div",{class:"w-8"},null,-1),S={class:"max-w-3xl mx-auto p-4"},T={class:"bg-white p-4 mb-2"},j={class:"filters"},U={class:"grid grid-cols-2 gap-4 mb-4"},F=e("label",{for:"region",class:"block text-sm font-medium text-gray-700"},"Regi칩n",-1),P=e("option",{value:""},"Todos",-1),q=["value"],z=e("label",{for:"location",class:"block text-sm font-medium text-gray-700"},"Locaci칩n",-1),G=e("option",{value:""},"Todos",-1),H=["value"],J={class:"mb-4"},K=e("label",{for:"merchantSearch",class:"block text-sm font-medium text-gray-700"},"Buscar Mercaderista",-1),O={class:"grid grid-cols-2 sm:grid-cols-2 gap-4"},W=e("i",{class:"fa-solid fa-circle-plus mr-2"},null,-1),X=e("i",{class:"fa-solid fa-file-excel mr-2"},null,-1),Y={class:"overflow-x-auto hidden lg:block"},Z={class:"min-w-full bg-white shadow-md rounded-lg overflow-hidden"},$=e("thead",{class:"bg-gray-200"},[e("tr",null,[e("th",{class:"py-3 px-4 text-left"},"Name"),e("th",{class:"py-3 px-4 text-left"},"DNI"),e("th",{class:"py-3 px-4 text-left"},"Celular"),e("th",{class:"py-3 px-4 text-left"},"Locaci칩n"),e("th",{class:"py-3 px-4 text-left"},"Actions")])],-1),ee={class:"py-3 px-4"},te={class:"py-3 px-4"},se={class:"py-3 px-4"},oe={class:"py-3 px-4"},ne={class:"py-3 px-4 flex space-x-2"},ie=["onClick"],le=e("i",{class:"fa-solid fa-circle-info"},null,-1),re=[le],de=["onClick"],ce=e("i",{class:"fa-solid fa-circle-minus"},null,-1),ae=[ce],he={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 lg:hidden"},ue={class:"flex items-center justify-between"},fe={class:"text-lg font-semibold"},ge={class:"flex space-x-2"},me=["onClick"],_e=e("i",{class:"fa-solid fa-circle-info"},null,-1),pe=[_e],xe=["onClick"],be=e("i",{class:"fa-solid fa-circle-minus"},null,-1),ve=[be],ye={class:"text-sm text-gray-700"},we=e("strong",null,"Loc:",-1),Me=e("strong",null,"Phone:",-1);function ke(o,s,m,_,n,i){const y=p("AddMerchantModal"),w=p("AdminLayout");return l(),x(w,{title:"Mercaderistas"},{header:b(()=>[e("div",N,[e("button",{onClick:s[0]||(s[0]=(...t)=>i.goBack&&i.goBack(...t)),class:"text-white"},V),E,I])]),default:b(()=>[e("div",S,[e("div",T,[e("div",j,[e("div",U,[e("div",null,[F,g(e("select",{id:"region","onUpdate:modelValue":s[1]||(s[1]=t=>n.selectedRegion=t),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:s[2]||(s[2]=(...t)=>i.filterMerchants&&i.filterMerchants(...t))},[P,(l(!0),d(a,null,c(n.regions,t=>(l(),d("option",{key:t.id,value:t.id},r(t.name),9,q))),128))],544),[[v,n.selectedRegion]])]),e("div",null,[z,g(e("select",{id:"location","onUpdate:modelValue":s[3]||(s[3]=t=>n.selectedLocation=t),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",onChange:s[4]||(s[4]=(...t)=>i.filterMerchants&&i.filterMerchants(...t))},[G,(l(!0),d(a,null,c(n.locations,t=>(l(),d("option",{key:t.id,value:t.id},r(t.name),9,H))),128))],544),[[v,n.selectedLocation]])])]),e("div",J,[K,g(e("input",{type:"text",id:"merchantSearch","onUpdate:modelValue":s[5]||(s[5]=t=>n.searchQuery=t),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",placeholder:"Buscar por nombre o DNI",onInput:s[6]||(s[6]=(...t)=>i.filterMerchants&&i.filterMerchants(...t))},null,544),[[A,n.searchQuery]])]),e("div",O,[e("div",null,[e("button",{class:"bg-red-ac text-white px-5 py-1 rounded-md inline-flex items-center w-full font-bold",onClick:s[7]||(s[7]=t=>n.showAddModal=!0)},[W,h(" A침adir ")])]),e("div",null,[e("button",{class:"bg-green-700 text-white px-5 py-1 rounded-md inline-flex items-center w-full font-bold",onClick:s[8]||(s[8]=t=>n.showAddModal=!0)},[X,h(" Importar Excel ")])])])])]),e("div",Y,[e("table",Z,[$,e("tbody",null,[(l(!0),d(a,null,c(n.filteredMerchants,t=>(l(),d("tr",{key:t.id,class:"border-b hover:bg-gray-100"},[e("td",ee,r(t.name),1),e("td",te,r(t.dni),1),e("td",se,r(t.phone),1),e("td",oe,r(t.location.name),1),e("td",ne,[e("button",{onClick:u=>i.viewDetails(t),class:"bg-green-500 text-white px-3 py-1 rounded-md hover:bg-green-600 transition"},re,8,ie),e("button",{onClick:u=>o.confirmRemove(t),class:"bg-red-500 text-white px-3 py-1 rounded-md hover:bg-red-600 transition"},ae,8,de)])]))),128))])])]),e("div",he,[(l(!0),d(a,null,c(n.filteredMerchants,t=>(l(),d("div",{key:t.id,class:"bg-white shadow-md rounded-lg p-4"},[e("div",ue,[e("h3",fe,r(t.name)+" - "+r(t.dni),1),e("div",ge,[e("button",{onClick:u=>i.viewDetails(t),class:"bg-green-500 text-white px-3 py-1 rounded-md hover:bg-green-600 transition"},pe,8,me),e("button",{onClick:u=>o.confirmRemove(t),class:"bg-red-500 text-white px-3 py-1 rounded-md hover:bg-red-600 transition"},ve,8,xe)])]),e("div",ye,[e("p",null,[we,h(" "+r(t.location.name),1)]),e("p",null,[Me,h(" "+r(t.phone),1)])])]))),128))])]),n.showAddModal?(l(),x(y,{key:0,locations:n.locations,onCloseAddMerchantModal:s[9]||(s[9]=t=>n.showAddModal=!1)},null,8,["locations"])):R("",!0)]),_:1})}const Qe=D(B,[["render",ke]]);export{Qe as default};
