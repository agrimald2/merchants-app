import{_ as v}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{o as d,e as a,a as t,n as _,t as n,f as h,F as g,h as b,s as f,x as S}from"./app-B04sb2MP.js";const x={components:{},props:["visit"],data(){return{isDetailsSelected:!0,isStartSelected:!0}},computed:{mapSrc(){return this.isStartSelected?`https://www.google.com/maps/embed/v1/place?key=AIzaSyD838-bKnRCBtmc2HgdkxH-GvykXOhUKWI&q=${this.visit.start_latitude},${this.visit.start_longitude}`:`https://www.google.com/maps/embed/v1/place?key=AIzaSyD838-bKnRCBtmc2HgdkxH-GvykXOhUKWI&q=${this.visit.end_latitude},${this.visit.end_longitude}`},visitPhotos(){return[this.visit.photo_url_1,this.visit.photo_url_2,this.visit.photo_url_3,this.visit.photo_url_4].filter(l=>l)}},methods:{closeModal(){this.$emit("close")},selectDetails(){this.isDetailsSelected=!0},selectPhotos(){this.isDetailsSelected=!1},selectStart(){this.isStartSelected=!0},selectEnd(){this.isStartSelected=!1},calculateTotalTime(l,i){const r=new Date(l),e=new Date(i)-r,s=Math.floor(e/36e5),o=Math.floor(e%36e5/6e4);return`${s}h ${o}m`}}},c=l=>(f("data-v-a8a2e5c7"),l=l(),S(),l),y={class:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-10"},w={class:"bg-white rounded-lg shadow-lg overflow-hidden w-11/12 max-w-2xl"},p={class:"p-4 border-b"},k={class:"flex justify-between items-center"},D=c(()=>t("h2",{class:"text-lg font-semibold"},"Detalles de la Visita",-1)),I=c(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),C=[I],T={class:"p-4"},M={class:"flex space-x-4 mb-4"},B={key:0,class:"mb-4"},V=c(()=>t("h3",{class:"font-semibold text-gray-700"},"Tiempos",-1)),L={class:"grid grid-cols-3 gap-4 mt-2"},z=c(()=>t("label",{class:"block text-gray-500"},"Llegada",-1)),F={class:"text-lg font-medium text-gray-900"},H=c(()=>t("label",{class:"block text-gray-500"},"Salida",-1)),P={class:"text-lg font-medium text-gray-900"},j=c(()=>t("label",{class:"block text-gray-500"},"Tiempo",-1)),E={class:"text-lg font-medium text-gray-900"},K={key:1,class:"mb-4"},N={class:"font-semibold text-gray-700"},A={class:"flex items-center space-x-4 mt-2"},O={class:"mt-2"},U=["src"],q={key:2,class:"mb-4"},G=c(()=>t("h3",{class:"font-semibold text-gray-700"},"Bitácora",-1)),R={class:"p-4 bg-gray-100 rounded-md text-gray-700"},W={key:3,class:"mb-4"},X=c(()=>t("h3",{class:"font-semibold text-gray-700"},"Fotos Durante la Visita",-1)),J={class:"carousel"},Q=["src"];function Y(l,i,r,u,e,s){return d(),a("div",y,[t("div",w,[t("div",p,[t("div",k,[D,t("button",{class:"text-black",onClick:i[0]||(i[0]=o=>l.$emit("close"))},C)])]),t("div",T,[t("div",M,[t("button",{class:_([{"text-red-500 border-b-2 border-red-500":e.isDetailsSelected,"text-gray-500":!e.isDetailsSelected},"pb-1 focus:outline-none"]),onClick:i[1]||(i[1]=(...o)=>s.selectDetails&&s.selectDetails(...o))},"Detalles",2),t("button",{class:_([{"text-red-500 border-b-2 border-red-500":!e.isDetailsSelected,"text-gray-500":e.isDetailsSelected},"pb-1 focus:outline-none"]),onClick:i[2]||(i[2]=(...o)=>s.selectPhotos&&s.selectPhotos(...o))},"Fotos Durante la Visita",2)]),e.isDetailsSelected?(d(),a("div",B,[V,t("div",L,[t("div",null,[z,t("div",F,n(new Date(r.visit.visit_started_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})),1)]),t("div",null,[H,t("div",P,n(new Date(r.visit.visit_ended_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})),1)]),t("div",null,[j,t("div",E,n(s.calculateTotalTime(r.visit.visit_started_at,r.visit.visit_ended_at)),1)])])])):h("",!0),e.isDetailsSelected?(d(),a("div",K,[t("h3",N,"Ubicación - "+n(r.visit.point_of_sale.address),1),t("div",A,[t("button",{class:_([{"text-red-500 border-b-2 border-red-500":e.isStartSelected,"text-gray-500":!e.isStartSelected},"pb-1 focus:outline-none"]),onClick:i[3]||(i[3]=(...o)=>s.selectStart&&s.selectStart(...o))},"INICIO",2),t("button",{class:_([{"text-red-500 border-b-2 border-red-500":!e.isStartSelected,"text-gray-500":e.isStartSelected},"pb-1 focus:outline-none"]),onClick:i[4]||(i[4]=(...o)=>s.selectEnd&&s.selectEnd(...o))},"FINAL",2)]),t("div",O,[t("iframe",{src:s.mapSrc,width:"800",height:"500",style:{border:"0"},allowfullscreen:"true",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade",allow:"geolocation"},null,8,U)])])):h("",!0),e.isDetailsSelected?(d(),a("div",q,[G,t("div",R,n(r.visit.visit_overview),1)])):h("",!0),e.isDetailsSelected?h("",!0):(d(),a("div",W,[X,t("div",J,[(d(!0),a(g,null,b(s.visitPhotos,(o,m)=>(d(),a("div",{key:m,class:"carousel-item"},[t("img",{src:o,alt:"Visit photo",class:"w-full h-64 object-cover rounded-lg"},null,8,Q)]))),128))])]))])])])}const tt=v(x,[["render",Y],["__scopeId","data-v-a8a2e5c7"]]);export{tt as default};
